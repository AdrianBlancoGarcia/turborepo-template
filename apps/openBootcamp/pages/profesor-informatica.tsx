// This is a skeleton starter React page generated by Plasmic.
// This file is owned by you, feel free to edit as you see fit.
import { NextSeo } from 'next-seo';
import * as React from 'react';
import Navbar from '../components/Navbar';

import styles from '../styles/Drawer.module.css';

import { PlasmicLandingCap } from '../components/plasmic/open_bootcamp_v_2_0/PlasmicLandingCap';
import { GetStaticProps } from 'next';
import Button from '../components/Button';
import Drawer from '../components/Drawer';
import Link from 'next/link';
import dynamic from 'next/dynamic';
const OBLink = dynamic(() => import('../components/LinkOb'));

export const getStaticProps: GetStaticProps = async () => {
  const linksList = [
    { title: 'Sobre la Oferta', href: '#sobre-oferta', isLink: true },
    { title: '¿Dónde están las vacantes?', href: '#donde-estamos', isLink: true },
  ];

  return {
    props: { linksList },
    revalidate: 60,
  };
};

function LandingCap({ linksList }: { linksList: [{ title: string; href: string; isLink: boolean }] }) {
  const [openDrawer, setOpenDrawer] = React.useState<boolean>(false);

  return (
    <>
      <NextSeo
        noindex
        title={`${process.env.NEXT_PUBLIC_BASE_NAME} | ¿Tienes el Máster en profesorado o CAP? ¡ENTRA AQUÍ!`}
        canonical={`${process.env.NEXT_PUBLIC_BASE_URL}/profesor-informatica`}
        description="Buscamos 40 docentes para trabajar como profesor de Programación. FORMACIÓN + EMPLEO ¡GRATIS!"
        openGraph={{
          type: 'website',
          description: `Buscamos 40 docentes para trabajar como profesor de Programación. FORMACIÓN + EMPLEO ¡GRATIS!`,
          title: `${process.env.NEXT_PUBLIC_BASE_NAME} | ¿Tienes el Máster en profesorado o CAP? ¡ENTRA AQUÍ!`,
          url: `${process.env.NEXT_PUBLIC_BASE_URL}/profesor-informatica`,
        }}
      />
      <PlasmicLandingCap
        heroButton={
          <Button
            size="normal"
            color="darkGray"
            data-cy="cta_hero"
            round={true}
            href={`https://imagina-formacion.typeform.com/to/pV3ESsAC`}
            className={'cta_info'}
          >
            Solicita información
          </Button>
        }
        ctaLead={
          <Button
            size="normal"
            color="darkGray"
            data-cy="cta_lead"
            round={true}
            href={`https://imagina-formacion.typeform.com/to/pV3ESsAC`}
            className={'cta_info'}
          >
            Solicita información
          </Button>
        }
        navbar={
          <Navbar
            showLoginButton
            className={styles.navbar_container}
            openDrawer={() => setOpenDrawer(!openDrawer)}
            linksList={linksList}
            loginButton={'Solicita información'}
            loginButtonHref="https://imagina-formacion.typeform.com/to/pV3ESsAC"
            navButton={true}
            page='cap'
          />
        }
      />
      <Drawer
        className={
          styles.drawer_container + ' ' + (openDrawer ? styles.drawer_container__show : styles.drawer_container__hidden)
        }
        links={linksList?.map((link, index) => (
          <Link key={`navbar-link-${index}`} href={link.href} passHref>
            {link.isLink ? (
              <OBLink href={link.href}>{link.title}</OBLink>
            ) : (
              <Button color="navLink" size="small" onClick={() => setOpenDrawer(false)}>
                {link.title}
              </Button>
            )}
          </Link>
        ))}
        drawerButton={<Button drawer="close" data-cy="close_drawer" onClick={() => setOpenDrawer(false)} />}
        buttons={
          <div style={{ width: '100%', display: 'flex', columnGap: '20px' }}>
            <Button
              data-cy="cta_navbar__drawer"
              color="blue"
              size="small"
              className={'cta_info ' + styles.w100}
              href={`https://imagina-formacion.typeform.com/to/pV3ESsAC`}
            >
              Solicita información
            </Button>
          </div>
        }
      />
    </>
  );
}

export default LandingCap;
